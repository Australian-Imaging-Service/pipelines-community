arcana_spec_version: 1.0  # the version of the specification format used for this file
title: 'Zip up a directory'  # Short name for the pipeline referenced in the UI
version:
  # The version of Ubuntu's zip we are using
  package: "3.0"
base_image:
  # Pick a generic base image, in this case Ubuntu - Jammy (22.04LTS)
  name: ubuntu
  tag: jammy
authors:
  # Authors of the pipeline. The first email will be considered to be the maintainer of
  # the generated container images
  - name: Thomas G. Close
    email: thomas.close@sydney.edu.au
docs:
  # Link to the external documentation for the tool
  info_url: https://manpages.ubuntu.com/manpages/focal/man1/zip.1.html
  # Description for auto-generated docss
  description: |
    This is a simple pipeline that zips up the given directory
packages:
  # Install the zip command in the Ubuntu image
  system:
  - zip
command:
  task: arcana.common:shell_cmd  # Use the generic "shell-cmd" task
  row_frequency: session  # the pipeline is desgined to run on imaging "sessions" as opposed to "subjects" or "projects"
  inputs:  # List the inputs that are presented to end-user in UI
    to_zip:
      datatype: generic/fs-object  # MIME-type or "MIME-like" format
      help: "Input file-system object to zip"  # description of field presented in UI
      configuration:  # Additional configuration args that are passed to the arcana.common:shell_cmd task as part of the "inputs" dict
        argstr: ''  # Position of field when printed to command line call. Negative numbers are indexed from the end backwards
        position: -1  # prefix for field when printed to command line
  outputs:  # List the outputs generated by the pipeline
    zipped:
      datatype: application/zip  # MIME-type or "MIME-like" format
      help: Zipped FS Object  # description of field presented in UI
      configuration:
        argstr: ''  # Position of field when printed to command line call. Negative numbers are indexed from the end backwards
        position: -2  # prefix for field when printed to command line
  parameters:  # Parameters exposed to user to UI
    compression:
      datatype: field/integer  # Format of the field
      help: the level of compression applied  # description of field presented in UI
      default: 5  # Default value, filled in on the UI
      configuration: # Additional configuration parameter args that are passed to the arcana.common:shell_cmd task in the "parameters" dict
        # string template for field when printed to command line. "{field-name}" are
        # replaced by the value provided to the field name
        argstr: -{compression}
  configuration:  # Additional args passed to arcana.common:shell_cmd
    name: zip_dir
    executable: zip
    