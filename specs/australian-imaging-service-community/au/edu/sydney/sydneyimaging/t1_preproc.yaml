title: "Preprocess T1-weighted MRI" # Short name for the pipeline referenced in the UI
schema_version: 1.0 # the version of the specification format used for this file
version:
  # Define a version for the pipeline in combination of the underlying package version (e.g. FSL)
  # and the "build" of the pipeline
  package: "1.0"
  build: "1"
base_image:
  # Chose a NeuroDesk FSL container as the base
  name: vnmd/neurodesktop
  package_manager: apt  # It is not obvious from the base image what the package manager is
  tag: '2024-01-11'
packages:
  # Install dependencies for DICOM->NIfTI conversion
  pip:
    - fileformats-medimage-extras
authors:
  # Authors of the pipeline. The first email will be considered to be the maintainer of
  # the generated container images
  - name: Arkiev D'Souza
    email: arkiev.dsouza@sydney.edu.au
  - name: Thomas G. Close
    email: thomas.close@sydney.edu.au
licenses:
  freesurfer:
    destination: /opt/freesurfer/license.txt
    info_url: https://surfer.nmr.mgh.harvard.edu/registration.html
    description: >
      FastSurfer, which is used to perform segmentation and surface recon, requires a FreeSurfer license to run.
docs:
  info_url: 'https://placeholder.org'  # Link to external documentation for underlying tool
  description: |  # Description of tool for auto-docs
   Generate a 5TT image (HSVS) and parcellation image (Desikan, Destrieux, HCPMMP1, Yeo7 and Yeo17) from a single input anatomical image. Input image should satisfy the input requirements for FastSurfer
command:
  task: australianimagingservice.community.au.edu.sydney.sydneyimaging.t1_preproc:t1_preproc  # Use the generic "shell-cmd" task
  row_frequency: session  # the pipeline is desgined to run on imaging "sessions" as opposed to "subjects" or "projects"
  inputs:  # List the inputs that are presented to end-user in UI
    T1w:
      datatype: medimage/nifti-gz  # MIME-type or "MIME-like" format
      help: "T1-weighted anatomical scan"  # description of field presented in U
      # column_defaults:
      #   datatype: medimage/dicom-series  # the default 
  outputs:  # List the outputs generated by the pipeline
    5TThsvs:
      datatype: medimage-mrtrix3/image-format-gz  # MIME-type or "MIME-like" format
      help:  5-tissue-type image suitable for ACT generated using HSVS algorithm # description of field presented in UI
    5TThsvs_vis:
      datatype: medimage-mrtrix3/image-format-gz  # MIME-type or "MIME-like" format
      help:  image for visualisation purposes from an ACT 5TT segmented anatomical image  # description of field presented in UI
    parcellation_desikan:
      datatype: medimage-mrtrix3/image-format-gz  # MIME-type or "MIME-like" format
      help: parcellation image generated using Desikan atlas  # description of field presented in UI
    parcellation_desikan:
      datatype: medimage-mrtrix3/image-format-gz  # MIME-type or "MIME-like" format
      help: parcellation image generated using Desikan atlas
    parcellation_destrieux:
      datatype: medimage-mrtrix3/image-format-gz  # MIME-type or "MIME-like" format
      help: parcellation image generated using Destrieux atlas
    parcellation_hcpmmp1:
      datatype: medimage-mrtrix3/image-format-gz  # MIME-type or "MIME-like" format
      help: parcellation image generated using HCPMMP1 atlas
    parcellation_Yeo7:
      datatype: medimage-mrtrix3/image-format-gz  # MIME-type or "MIME-like" format
      help: parcellation image generated using Yeo7 atlas
    parcellation_Yeo17:
      datatype: medimage-mrtrix3/image-format-gz  # MIME-type or "MIME-like" format
      help: parcellation image generated using Yeo17 atlas
    FastSurfer_dir: 
      datatype: generic/directory
      help: contents of FastSurfer outputs
  parameters:
    compression:
      datatype: field/integer  # Format of the field
      help: the level of compression applied  # description of field presented in UI
      default: 5  # Default value, filled in on the UI
  # configuration: # Additional args passed to arcana.common:shell_cmd
  #   name: bet
  #   executable: bet
