schema_version: 2.0 # the version of the specification format used for this file
title: "Example BET pipeline" # Short name for the pipeline referenced in the UI
version: "6.0.6.4"
base_image:
  # Chose a NeuroDesk FSL container as the base
  name: vnmd/fsl_6.0.6.4
  package_manager: apt # It is not obvious from the base image what the package manager is
  tag: "20230618"
packages:
  # Install dependencies for DICOM->NIfTI conversion
  pip:
    - fileformats-medimage-extras
  neurodocker:
    dcm2niix: v1.0.20201102
authors:
  # Authors of the pipeline. The first email will be considered to be the maintainer of
  # the generated container images
  - name: Thomas G. Close
    email: thomas.close@sydney.edu.au
docs:
  info_url: https://fsl.fmrib.ox.ac.uk/fsl/fslwiki # Link to external documentation for underlying tool
  description: | # Description of tool for auto-docs
    An example wrapping BET in a XNAT pipeline
commands:
  bet:
    row_frequency: common:Clinical[session] # the pipeline is desgined to run on imaging "sessions" as opposed to "subjects" or "projects"
    task:
      type: shell
      executable: bet
      inputs: # List the inputs that are presented to end-user in UI
        t1w:
          type: medimage/nifti-gz # MIME-type or "MIME-like" format
          help: "T1-weighted anatomical scan" # description of field presented in UI
          position: -2 # Position of field when printed to command line call. Negative numbers are indexed from the end backwards
          argstr: "" # prefix for field when printed to command line
      outputs: # List the outputs generated by the pipeline
        brain:
          type: medimage/nifti-gz # MIME-type or "MIME-like" format
          help: Brain-extracted data # description of field presented in UI
          position: -1 # Position of field when printed to command line call. Negative numbers are indexed from the end backwards
          path_template: "{t1w}_brain.nii.gz" # Template for output file path, where {field-name} are replaced by the value provided to the field name
          argstr: "" # prefix for field when printed to command line
