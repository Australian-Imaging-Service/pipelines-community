# The version of the specification format used for this file
schema_version: 2.0
# Short name for the pipeline referenced in the UI
title: "Zips up a file or directory"
version: "3.0"
base_image:
  # Pick a generic base image, in this case Ubuntu - Jammy (22.04LTS)
  name: ubuntu
  tag: jammy
authors:
  # Authors of the pipeline. The first email will be considered to be the maintainer of
  # the generated container images
  - name: Thomas G. Close
    email: thomas.close@sydney.edu.au
docs:
  # Link to the external documentation for the tool
  info_url: https://manpages.ubuntu.com/manpages/focal/man1/zip.1.html
  # Description for auto-generated docss
  description: |
    This is a simple pipeline that zips up the given directory
packages:
  # Install the zip command in the Ubuntu image
  system:
    - zip
  pip:
    - frametree
    - frametree-xnat
    - pydra2app-xnat
    - pydra2app
commands:
  zip:
  # Use the generic "shell-command" task
    row_frequency: common:Clinical[session]
    task: 
      type: shell
      executable: zip
      inputs:
        in_file:
          # MIME-type or "MIME-like" format, generic/fs-object corresponds a file or directory
          type: generic/fs-object
          # description of field presented in UI
          help: "Input file-system object to zip"
          # Position of field on command line call. Negative numbers are indexed backwards from the end
          argstr: ""
          # prefix for field when printed to command line
          position: -1
        compression:
          # Format of the field
          type: int
          # description of field presented in UI
          help: the level of compression applied
          # Default value, filled in on the UI
          default: 5
          # string template for field when printed to command line. "{field-name}" are
          # replaced by the value provided to the field name
          argstr: -{compression}
      # List the outputs generated by the pipeline
      outputs:
        zip_file:
          # MIME-type or "MIME-like" format
          type: application/zip
          # description of field presented in UI
          help: Zipped file-system Object
          # Path of the generated output file
          path_template: "{in_file}.zip"
          # Position of field on command line call. Negative numbers are indexed backwards from the end
          argstr: ""
          # prefix for field when printed to command line
          position: -2
      # Parameters exposed to user to UI
    parameters:
      - compression
  
